<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<Class name="iKnow.Utils.Log">
<Description>
Version 1.0.5 DW-07.10.2015</Description>
<Super>%Persistent</Super>
<TimeCreated>63504,63163.03871</TimeCreated>

<Property name="LogDate">
<Type>%Date</Type>
</Property>

<Property name="LogTime">
<Type>%Time</Type>
</Property>

<Property name="Message">
<Type>%String</Type>
</Property>

<Index name="idxDate">
<Properties>LogDate</Properties>
</Index>

<Method name="Log">
<ClassMethod>1</ClassMethod>
<FormalSpec>Message:%String="",Terminal:%Boolean=0</FormalSpec>
<Implementation><![CDATA[
	#Dim nowDate as %Date = $Piece($H, ",", 1)
	#Dim nowTime as %Time = $Piece($H, ",", 2)
	&sql(insert into iKnow_Utils.Log (LogDate, LogTime, Message)
				Values (:nowDate, :nowTime, :Message))
	Set ^LogLoad($ZDate(nowDate,8),$i(^LogLoad($ZDate(nowDate,8))))=$ZTime(nowTime)_" "_Message
	If Terminal Use 0 Write !,$ZDate(nowDate,4)," - ",$ZTime(nowTime)," ",Message,!
]]></Implementation>
</Method>

<Storage name="Default">
<Type>%Library.CacheStorage</Type>
<DataLocation>^iKnow.Utils.LogD</DataLocation>
<DefaultData>LogDefaultData</DefaultData>
<IdLocation>^iKnow.Utils.LogD</IdLocation>
<IndexLocation>^iKnow.Utils.LogI</IndexLocation>
<StreamLocation>^iKnow.Utils.LogS</StreamLocation>
<Data name="LogDefaultData">
<Value name="1">
<Value>%%CLASSNAME</Value>
</Value>
<Value name="2">
<Value>LogDate</Value>
</Value>
<Value name="3">
<Value>LogTime</Value>
</Value>
<Value name="4">
<Value>Message</Value>
</Value>
</Data>
</Storage>
</Class>
</Export>
